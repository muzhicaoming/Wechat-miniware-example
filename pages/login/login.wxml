<!--pages/login/login.wxml-->
<view class="container">
  <!-- 已登录状态 -->
  <view class="card" wx:if="{{isLoggedIn && userInfo}}">
    <view class="title">用户信息</view>
    
    <view class="user-info-card">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.nickName}}</text>
        <text class="location" wx:if="{{userInfo.province || userInfo.city}}">
          {{userInfo.province}}{{userInfo.city}}
        </text>
      </view>
    </view>
    
    <button class="btn btn-secondary" bindtap="handleLogout">退出登录</button>
  </view>

  <!-- 未登录状态 -->
  <view class="card" wx:else>
    <view class="title">微信登录</view>
    
    <view class="login-tip">
      <text class="tip-icon">🔐</text>
      <text class="tip-text">使用微信账号登录</text>
    </view>
    
    <button class="btn btn-wechat" bindtap="handleWechatLogin">
      <text class="btn-icon">💬</text>
      <text>微信一键登录</text>
    </button>
    
    <view class="login-desc">
      <text>点击登录即表示同意授权获取您的微信头像、昵称等信息</text>
    </view>
  </view>
  
  <view class="card">
    <view class="subtitle">说明</view>
    <text class="desc">本应用使用微信登录，登录信息仅存储在本地，不会上传到服务器。</text>
  </view>
</view>
