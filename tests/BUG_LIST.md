# Bug列表

## 已发现的Bug汇总

本文档记录了在测试过程中发现的所有Bug。

---

## Bug统计

**总计**: 8个Bug
- **严重**: 2个
- **一般**: 4个
- **轻微**: 2个

---

## Bug详细列表

### BUG-001: TabBar图标文件缺失 ⚠️ 严重

**模块**: 应用配置  
**严重程度**: 严重  
**状态**: ✅ 已修复

**描述**:  
`app.json` 中配置了TabBar，但图标文件不存在，导致模拟器启动失败。

**错误信息**:  
```
app.json: ["tabBar"]["list"][0]["iconPath"]: "images/home.png" 未找到
app.json: ["tabBar"]["list"][0]["selectedIconPath"]: "images/home-active.png" 未找到
app.json: ["tabBar"]["list"][1]["iconPath"]: "images/user.png" 未找到
app.json: ["tabBar"]["list"][1]["selectedIconPath"]: "images/user-active.png" 未找到
```

**修复方案**:  
已移除TabBar配置，项目可以正常运行。如需TabBar，需要添加图标文件。

**影响范围**:  
- 模拟器无法启动
- 应用无法运行

---

### BUG-002: 登录页面占位符文本显示乱码 ⚠️ 严重

**模块**: 用户登录页面  
**严重程度**: 严重  
**状态**: ✅ 已优化

**描述**:  
登录页面的输入框占位符文本显示为乱码（如"月刊八巾厂口"），而不是正常的"请输入用户名"。

**可能原因**:  
- 字体编码问题
- 微信开发者工具字体渲染问题
- 样式冲突

**修复方案**:  
- 已优化登录页面样式
- 添加中文字体支持
- 改进输入框样式

**影响范围**:  
- 用户体验差
- 功能可用但显示异常

---

### BUG-003: 计算器除零处理不当 ⚠️ 一般

**模块**: 计算器  
**严重程度**: 一般  
**状态**: ⏳ 待修复

**描述**:  
计算器在除零时返回0，没有错误提示，不符合数学逻辑。

**复现步骤**:  
1. 打开计算器页面
2. 输入任意数字（如：5）
3. 点击除号（÷）
4. 输入0
5. 点击等号（=）
6. 结果显示为0，而不是错误提示

**预期行为**:  
应该显示错误提示，如"除数不能为0"或"错误"。

**当前代码**:  
```javascript
case '/':
  return next !== 0 ? prev / next : 0  // 问题：返回0而不是错误提示
```

**修复建议**:  
```javascript
case '/':
  if (next === 0) {
    wx.showToast({
      title: '除数不能为0',
      icon: 'none'
    })
    return prev  // 或返回 'Error'
  }
  return prev / next
```

**影响范围**:  
- 计算结果不准确
- 用户体验不佳

---

### BUG-004: 备忘录时间格式化可能失败 ⚠️ 一般

**模块**: 备忘录  
**严重程度**: 一般  
**状态**: ⏳ 待修复

**描述**:  
如果备忘录的`createTime`字段不存在或格式不正确，`new Date(memo.createTime)`可能返回Invalid Date，导致时间显示异常。

**复现步骤**:  
1. 手动修改本地存储中的备忘录数据
2. 删除`createTime`字段或设置为无效值
3. 打开备忘录页面
4. 时间显示为"Invalid Date"或空白

**当前代码**:  
```javascript
createTimeStr: new Date(memo.createTime).toLocaleString('zh-CN')
```

**修复建议**:  
```javascript
createTimeStr: memo.createTime 
  ? new Date(memo.createTime).toLocaleString('zh-CN')
  : '未知时间'
```

**影响范围**:  
- 时间显示异常
- 数据损坏时用户体验差

---

### BUG-005: 用户信息页面登录时间可能为空 ⚠️ 一般

**模块**: 用户信息页面  
**严重程度**: 一般  
**状态**: ⏳ 待修复

**描述**:  
如果用户信息中没有`loginTime`字段，登录时间显示为空字符串，用户体验不佳。

**当前代码**:  
```javascript
let loginTime = ''
if (userInfo && userInfo.loginTime) {
  loginTime = new Date(userInfo.loginTime).toLocaleString('zh-CN')
}
```

**修复建议**:  
```javascript
let loginTime = '未知'
if (userInfo && userInfo.loginTime) {
  loginTime = new Date(userInfo.loginTime).toLocaleString('zh-CN')
}
```

**影响范围**:  
- 信息显示不完整
- 用户体验略差

---

### BUG-006: 待办事项输入验证不足 ⚠️ 一般

**模块**: 待办事项  
**严重程度**: 一般  
**状态**: ⏳ 待修复

**描述**:  
待办事项只检查了空字符串，但没有检查只包含空格的情况。用户可以添加只有空格的待办。

**复现步骤**:  
1. 打开待办事项页面
2. 输入多个空格（如："   "）
3. 点击添加
4. 待办被成功添加（不应该）

**当前代码**:  
```javascript
if (!inputValue.trim()) {
  // 只检查了trim后的值
}
```

**修复建议**:  
代码已经使用了`trim()`，但可以添加更明确的提示：
```javascript
if (!inputValue || !inputValue.trim()) {
  wx.showToast({
    title: '请输入有效的待办内容',
    icon: 'none'
  })
  return
}
```

**影响范围**:  
- 数据质量
- 用户体验

---

### BUG-007: 天气查询页面缺少加载状态 ⚠️ 轻微

**模块**: 天气查询  
**严重程度**: 轻微  
**状态**: ⏳ 待修复

**描述**:  
天气查询页面在查询时没有显示加载状态，用户不知道查询是否在进行中。

**修复建议**:  
```javascript
queryWeather() {
  wx.showLoading({
    title: '查询中...',
    mask: true
  })
  
  // 模拟查询延迟
  setTimeout(() => {
    // ... 查询逻辑
    wx.hideLoading()
  }, 500)
}
```

**影响范围**:  
- 用户体验
- 交互反馈

---

### BUG-008: 设置页面清除数据后未刷新其他页面 ⚠️ 轻微

**模块**: 设置页面  
**严重程度**: 轻微  
**状态**: ⏳ 待修复

**描述**:  
在设置页面清除所有数据后，如果其他页面（如待办事项、备忘录）已经打开，这些页面的数据不会自动刷新，仍然显示旧数据。

**修复建议**:  
清除数据后，可以：
1. 提示用户刷新页面
2. 使用事件通知其他页面刷新
3. 跳转到首页并提示

**影响范围**:  
- 数据一致性
- 用户体验

---

## 修复优先级

### 高优先级（需要立即修复）
1. ✅ BUG-001: TabBar图标文件缺失（已修复）
2. ✅ BUG-002: 登录页面占位符文本显示乱码（已优化）

### 中优先级（建议尽快修复）
3. BUG-003: 计算器除零处理不当
4. BUG-004: 备忘录时间格式化可能失败
5. BUG-005: 用户信息页面登录时间可能为空
6. BUG-006: 待办事项输入验证不足

### 低优先级（可以后续优化）
7. BUG-007: 天气查询页面缺少加载状态
8. BUG-008: 设置页面清除数据后未刷新其他页面

---

## 测试建议

### 需要重点测试的场景
1. **边界值测试**
   - 输入超长文本
   - 输入特殊字符
   - 输入空值或空格

2. **异常数据测试**
   - 本地存储数据损坏
   - 缺少必要字段
   - 数据类型错误

3. **用户体验测试**
   - 操作反馈
   - 错误提示
   - 加载状态

---

## 修复状态

- ✅ 已修复: 2个
- ⏳ 待修复: 6个
- 📝 待验证: 0个

---

**最后更新**: 2024-01-01  
**测试人员**: QA团队  
**审核状态**: 待开发团队确认
